@model IEnumerable<prjiHealth.ViewModels.CProblemViewModel>
@{
    ViewData["Title"] = "iHeath後臺";
    Layout = "~/Areas/Admin/Admin_Layout.cshtml";
}
@section Styles{
    <style>
        #title {
            font-weight: 800;
            color: #599e32;
            margin-left: 20vw;
            margin-right: 20vw;
        }
    </style>
}
<h2 id="title">意見回覆</h2>
<hr />
<section class="product spad">
    <div class="container">
        <div class="row">
            @*※※※非會員專區的View的內容請從此處開始※※※*@
            <div class="container">
                @*<div class="row">
                    <div class="col-lg-12">
                        <div class="contact__form__title">
                            <h2>意見回覆</h2>
                        </div>
                    </div>
                </div>*@
                <form asp-action="" style=" margin:10px">
                    <div class="row">
                        <div class="col-lg-3 col-md-3 " @*style="padding:0px 0px 0px 0px "*@>
                            <select name="stype" id="stype" class="custom-select">
                                @*<option value="999" disabled selected hidden>依處理狀態篩選</option>*@
                                <option value="未處理">未處理</option>
                                <option value="處理中">處理中</option>
                                <option value="已完成">已完成</option>
                            </select>
                            <br>
                            <button type="button" class="site-btn" id="submitproblem" style="margin-top:5px;margin-left:0px">依處理狀態篩選</button>
                        </div>

                        <div class="col-lg-3 col-md-3">
                            <select name="qtype" id="qtype" class="custom-select">
                                @* <option value="999" disabled selected hidden>依問題類型篩選</option>*@
                                <option value="帳號/密碼/認證">帳號相關</option>
                                <option value="訂單相關">訂單相關</option>
                                <option value="課程相關">課程相關</option>
                                <option value="商品相關">商品相關</option>
                                <option value="其他建議相關">其他相關</option>
                            </select>
                            <br>
                            <button type="button" class="site-btn" id="submitproblem" style="margin-top:5px">依問題類型篩選</button>
                        </div>

                    </div>
                </form>
            </div>

            <table class="table" style="table-layout: fixed">
                <thead>
                    <tr>
                        @*<th>
                                @Html.DisplayNameFor(model => model.FProblemId)
                            </th>*@
                        <th>
                            @Html.DisplayNameFor(model => model.FProblemTime)
                        </th>
                        <th>
                            類別
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.FProblemContent)
                        </th>
                        <th style="white-space:nowrap">
                            會員編號
                        </th>
                        <th style="white-space:nowrap">
                            訂單編號
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.FEmail)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.FContactPhone)
                        </th>
                        <th>
                            狀態
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            @*<td>
                                    @Html.DisplayFor(modelItem => item.FProblemId)
                                </td>*@
                            <td>
                                @Html.DisplayFor(modelItem => item.FProblemTime)
                            </td>
                            <td style="white-space:nowrap">
                                @Html.DisplayFor(modelItem => item.FProblemCategory.FProblemCategory)
                            </td>
                            <td style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">
                                @Html.DisplayFor(modelItem => item.FProblemContent)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FMemberId)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FOrderId)
                            </td>
                            <td style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">
                                @Html.DisplayFor(modelItem => item.FEmail)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FContactPhone)
                            </td>
                            <td style="white-space:nowrap">
                                @Html.DisplayFor(modelItem => item.Status.FStatus)
                            </td>
                            <td style="white-space:nowrap">
                                @Html.ActionLink("回覆", "Reply", new { id = item.FProblemId }, new { @class = "site-btn" })

                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            <div class="product__pagination">
                <a href="#">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#"><i class="fa fa-long-arrow-right"></i></a>
            </div>
        </div>
    </div>
</section>

@section Scripts{
    <script>
        let ProblemCategoryID = 0;
        function SelectedProblemCategoryID() {          /*判斷所選類別對應的ID*/
            if ($('#qtype').val() == "帳號相關")
                ProblemCategoryID = 1;
            if ($('#qtype').val() == "訂單相關")
                ProblemCategoryID = 2;
            if ($('#qtype').val() == "課程相關")
                ProblemCategoryID = 3;
            if ($('#qtype').val() == "商品相關")
                ProblemCategoryID = 4;
            if ($('#qtype').val() == "其他相關")
                ProblemCategoryID = 5;
        };
            //$('#qtype').on("change", SelectTableByProblemCategoryID) /*選擇類別時會產生寫入資料庫所需的ProblemCategoryID*/
    </script>
}