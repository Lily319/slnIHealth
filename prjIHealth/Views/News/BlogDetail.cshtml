@model TNews


@section Styles{

}
@{ ViewData["Title"] = "BlogDetail";
    Layout = "_Layout"; }

<!-- Blog Details Hero Begin -->


<section class="breadcrumb-section set-bg" data-setbg="/img/blog/details/details-hero.jpg" id="bannerTop">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    @*h2內容請自行更換*@
                    <h2 class="reveal_t1">@Model.FTitle</h2>
                    <div class="breadcrumb__option reveal_t1">
                        <a href="~/News/Blog">By @Model.FMemberId</a>
                        <span>@Model.FNewsDate.Substring(0, Math.Min(Model.FNewsDate.Length, 10)) 8 Comments</span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


<!--<section class="blog-details-hero set-bg" data-setbg="img/blog/details/details-hero.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="blog__details__hero__text">
                    <h2></h2>-->
<!--<ul>
    <li>By </li>-->
<!--<li></li>-->
<!--<li>8 Comments</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>-->
<!-- Blog Details Hero End -->
<!-- Blog Details Section Begin -->
<section class="blog-details spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-5 order-md-1 order-2">
                <div class="blog__sidebar">
                    <div class="blog__sidebar__search">
                        <form action="#">
                            <input type="text" placeholder="Search...">
                            <button type="submit"><span class="icon_search"></span></button>
                        </form>
                    </div>
                    <div class="blog__sidebar__item">
                        <h4>專欄分類</h4>
                        <ul>
                            <li><a href="#">所有顯示 (@ViewBag.Category0Count)</a></li>
                            <li><a href="#">運動健身 (@ViewBag.Category1Count)</a></li>
                            <li><a href="#">食物營養 (@ViewBag.Category2Count)</a></li>
                            <li><a href="#">新冠疫情 (@ViewBag.Category3Count)</a></li>
                            <li><a href="#">教練專欄 (@ViewBag.Category4Count)</a></li>
                            <!--專欄分類使用處-->
                        </ul>
                    </div>
                    <div class="blog__sidebar__item">
                        <h4>近期專欄</h4>
                        @{
                            IHealthContext db = new IHealthContext();
                            foreach (var item in db.TNews.OrderByDescending(t => t.FNewsDate).Take(3))
                            {
                                <a href="~/News/BlogDetail?id=@item.FNewsId" class="blog__sidebar__recent__item">
                                    <div class="blog__sidebar__recent__item__pic">
                                        <img src="~/img/blog/@item.FThumbnailPath" alt="" style="width:40px;height:40px">
                                    </div>
                                    <div class="blog__sidebar__recent__item__text">
                                        <h6>
                                            @item.FTitle.Substring(0, Math.Min(item.FContent.Length, 18)).Replace("<p>", "").Replace("<strong>", "").Replace("<br />", "").Replace("</p>", "")
                                            <br />
                                            @*@item.FTitle.Substring(20, Math.Min(item.FContent.Length, 30)).Replace("<p>", "").Replace("<strong>", "").Replace("<br />", "").Replace("</p>", "")*@
                                        </h6>
                                        <span>@item.FNewsDate.Substring(0, Math.Min(item.FNewsDate.Length, 10))</span>
                                    </div>
                                </a>
                            }
                        }
                    </div>
                    <div class="blog__sidebar__item">
                        <h4>快速搜尋</h4>
                        <div class="blog__sidebar__item__tags">
                            <a href="#">健身</a>
                            <a href="#">飲食</a>
                            <a href="#">新冠</a>
                            <a href="#">健康</a>
                            <a href="#">食譜</a>
                            <!--插入快速搜尋標籤-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 col-md-7 order-md-1 order-1">
                <div class="blog__details__text">
                    <img src="~/img/blog/@Model.FThumbnailPath" alt="">
                    <input type="hidden" value="@Model.FNewsId" name="NewsId" id="blodNewsId" />
                    <p>
                        @Html.Raw(@Model.FContent)
                    </p>

                    @*<div id="divReplyPartial">*@
                    <div>

                        @*@foreach (var item in Model)
                            {
                                <form asp-action="LoadComment" enctype="multipart/form-data">
                                    <input type="hidden" value="@item.FNewsId" name="FNewsId" />
                                    <input type="hidden" value="@item.FMemberId" name="FMemberId" />
                                    <label>使用者名稱</label>
                                    <label value="" readonly="readonly">@item.MemberName.FMemberName</label>
                                    <label>留言回覆</label>
                                    <label id="FNewsReply" name="FNewsReply" readonly="readonly">@item.FNewsReply</label>
                                </form>
                            }*@
                    </div>
                </div>
                <div class="blog__details__content">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="blog__details__author">
                                <div class="blog__details__author__pic">
                                    <img src="/img/blog/details/details-author.jpg" alt="">@*會員大頭貼路徑*@
                                </div>
                                <div class="blog__details__author__text">
                                    <h6>作者名稱</h6> @*@Model.FMemberId*@
                                    <span>權限</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="blog__details__widget">
                                <ul>
                                    <li><span>文章分類:</span> Food</li>
                                    <li><span>標籤:</span> All, Trending, Cooking, Healthy Food, Life Style</li>
                                </ul>
                                <div class="blog__details__social">
                                    <a href="#"><i class="fa fa-facebook"></i></a>
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                    <a href="#"><i class="fa fa-google-plus"></i></a>
                                    <a href="#"><i class="fa fa-linkedin"></i></a>
                                    <a href="#"><i class="fa fa-envelope"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <form asp-action="ReplyComment" enctype="multipart/form-data" id="blogForm">
                        @*@foreach (var item in Model)
                            {
                                <input type="hidden" name="FNewsId" value="@Html.DisplayFor(modelItem => item.FNewsId)" />
                                //<label>使用者名稱</label>
                                <input type="hidden" id="FMemberID" name="FMemberID" value="8" />
                            }*@
                        <input type="hidden" name="FNewsId" id="testInput" />
                        <br />
                        @*<label>@Model.FMember.FMemberName</label>*@
                        <input type="hidden" id="FMemberID" name="FMemberID" value="9 " />
                        @*<label value="" >@item.MemberName.FMemberName</label>*@
                        <label>留言回覆</label>
                        <input id="FNewsReply" name="FNewsReply" />
                        <br />
                        <input id="btnSubmit" type="submit" value="發送回覆" class="site-btn" onclick="return confirm('確定要留言嗎?')" /><button id="btnDEMO" class="site-btn">DEMO</button>
                    </form>
                    <button id="btnShow" class="site-btn" onclick="showPartial">顯示回覆</button>
                    <br />
                    <div id="divReplyPartial" hidden>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Blog Details Section End -->
<!-- Related Blog Section Begin -->
<section class="related-blog spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title related-blog-title">
                    <h2>您可能會喜歡的文章</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic">
                        <img src="/img/blog/blog-1.jpg" alt="">
                    </div>
                    <div class="blog__item__text">
                        <ul>
                            <li><i class="fa fa-calendar-o"></i> May 4,2019</li>
                            <li><i class="fa fa-comment-o"></i> 5</li>
                        </ul>
                        <h5><a href="#">簡單的小步驟協助你烹飪更簡單</a></h5>
                        <p>此文章我們將為您提供幾項簡單的小烹飪技巧，協助您更輕鬆的煮出美味的餐飲</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic">
                        <img src="/img/blog/blog-2.jpg" alt="">
                    </div>
                    <div class="blog__item__text">
                        <ul>
                            <li><i class="fa fa-calendar-o"></i> May 4,2019</li>
                            <li><i class="fa fa-comment-o"></i> 5</li>
                        </ul>
                        <h5><a href="#">六個方向讓您為了三十歲而準備的早餐</a></h5>
                        <p>為了即將到來的三十歲，我們會建議你六種不同的方向而準備的早餐類型</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic">
                        <img src="/img/blog/blog-3.jpg" alt="">
                    </div>
                    <div class="blog__item__text">
                        <ul>
                            <li><i class="fa fa-calendar-o"></i> May 4,2019</li>
                            <li><i class="fa fa-comment-o"></i> 5</li>
                        </ul>
                        <h5><a href="#">參訪美國的清境農場</a></h5>
                        <p>我們會為您介紹幾家在美國評比觀光旅遊分數不錯的永續經營農場</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts{
    <script>

        $("#btnDEMO").click(function (event) {
            event.preventDefault();
            $("#FNewsReply").val("這是DEMO測試唷");
        })
        //let testInput = $('#testInput');
        //var formData = new FormData(document.querySelector("#blogForm"));
        //fetch("/News/BlogDetail", { body: formData, method: "Post" }).then(Response => Response.text()).(data => {
        //    alert(data);
        //    $('#testInput').val(data);

        //});

   let dd= $('#blodNewsId').val();

        console.log(dd);
        $("#testInput").val(dd);

        let btnShow = document.querySelector('#btnShow');

        //$('#btnShow').click
        btnShow.addEventListener('click', showPartial)

        function showPartial() {
            let divPartial = document.querySelector('#divReplyPartial');
            if (divPartial.hasAttribute("hidden")) {
                divPartial.removeAttribute("hidden")
                btnShow.innerText = "隱藏回覆";
                $('#divReplyPartial').load('@Url.Content("~/News/LoadComment")' + `?id=${@Model.FNewsId}`)
                return;
            } else {
                divPartial.setAttribute("hidden", "")
                btnShow.innerText = "顯示回覆";
                //$('#divReplyPartial').empty();
                return;
            }
        }
    </script>
}